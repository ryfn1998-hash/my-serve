<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>星河伺服器控制台</title>
    <link href="https://fonts.cdnfonts.com/css/minecraftia" rel="stylesheet">
    <style>
        * { user-select: none; -webkit-user-select: none; }
        body { background-color: #FFFFFF; font-family: 'Minecraftia', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        h1 { color: #333; text-shadow: 2px 2px #DDD; font-size: 2.5rem; margin-bottom: 20px; }
        .container { background-color: #C6C6C6; border: 4px solid #000; border-top-color: #FFF; border-left-color: #FFF; border-right-color: #555; border-bottom-color: #555; padding: 40px; width: 320px; text-align: center; }
        .mc-button { background-color: #6E6E6E; border: 2px solid #000; border-top-color: #FFF; border-left-color: #FFF; color: #E0E0E0; padding: 15px; width: 100%; cursor: pointer; font-family: 'Minecraftia'; display: block; text-decoration: none; box-sizing: border-box; margin-bottom: 15px; outline: none; }
        .mc-button:hover { background-color: #7E7E7E; color: #FFFF55; }
        .discord-btn { background-color: #5865F2; margin-bottom: 0; }
        .mc-button:active { border-top-color: #333; border-left-color: #333; border-right-color: #FFF; border-bottom-color: #FFF; padding-top: 17px; padding-bottom: 13px; }
    </style>
</head>
<body oncontextmenu="return false;">
    <h1>星河伺服器</h1>
    <div class="container">
        <div style="margin-bottom:30px; color:#333;">數據開放狀態: <span id="status-text" style="color:#00AA00; font-weight:bold;">已連線</span></div>
        <button class="mc-button" onclick="launchServer()">啟動伺服器</button>
        <a href="https://discord.gg/3D49QtXgTK" target="_blank" class="mc-button discord-btn">加入 Discord</a>
    </div>
    <script>
        document.onkeydown = function(e) { if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode == 73) || (e.ctrlKey && e.keyCode == 85)) return false; };
        async function launchServer() {
            const btn = document.querySelector('button.mc-button');
            const status = document.getElementById('status-text');
            btn.innerText = "連線中..."; btn.disabled = true;
            const TOKEN = "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";
            try {
                const response = await fetch(`https://api.github.com/repos/ryfn1998-hash/my-serve/dispatches`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${TOKEN}`, 'Accept': 'application/vnd.github.v3+json' },
                    body: JSON.stringify({ event_type: 'start-command' })
                });
                if (response.ok) {
                    status.innerText = "指令已送達";
                    btn.innerText = "啟動成功";
                } else { throw new Error(); }
            } catch (e) {
                status.innerText = "連線失敗";
                status.style.color = "#FF5555";
                btn.innerText = "重試啟動";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
