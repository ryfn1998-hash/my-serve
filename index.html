<script>
    async function launchServer() {
        const btn = document.querySelector('button.mc-button');
        const status = document.getElementById('status-text');
        btn.innerText = "正在傳送指令..."; 
        btn.disabled = true;

        // 這裡維持你原本的 Token 拼接邏輯
        const p1 = "ghp_xHeWQo3SW3yTq4e"; 
        const p2 = "bgtzsUmnD5eobi51HkOyB";
        const TOKEN = p1 + p2;

        try {
            const response = await fetch(`https://api.github.com/repos/ryfn1998-hash/my-serve/dispatches`, {
                method: 'POST',
                headers: { 
                    'Authorization': `Bearer ${TOKEN}`, 
                    'Accept': 'application/vnd.github.v3+json' 
                },
                body: JSON.stringify({ event_type: 'start-command' })
            });

            if (response.ok) {
                status.innerText = "指令已送達";
                status.style.color = "#00FF00";
                btn.innerText = "啟動成功";
                // 成功後可以設定 3 秒後恢復按鈕
                setTimeout(() => { btn.disabled = false; btn.innerText = "再次啟動"; }, 3000);
            } else { 
                throw new Error("GitHub 回應錯誤"); 
            }
        } catch (e) {
            status.innerText = "連線失敗";
            status.style.color = "#FF5555";
            btn.innerText = "重試啟動";
            btn.disabled = false;
        }
    }
</script>
